<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Niyantri Coffee - Cart</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@300;400;600&display=swap');
    .serif { font-family: 'Playfair Display', serif; }
    .sans { font-family: 'Inter', sans-serif; }
  </style>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="opacity-0 transition-opacity duration-1000 ease-in-out" onload="window.requestAnimationFrame(() => document.body.classList.remove('opacity-0'))">
  <nav class="absolute top-0 left-0 right-0 bg-black bg-opacity-40 backdrop-filter backdrop-blur-md text-white z-20">
    <div class="max-w-full w-full px-6 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <span class="text-2xl serif">Niyantri Coffee</span>
      </div>
      <div class="hidden md:flex space-x-6 sans">
        <a href="index.html" class="hover:underline">Home</a>
        <a href="menu.html" class="hover:underline">Menu</a>
        <a href="cart.html" class="hover:underline">Cart</a>
        <a href="about.html" class="hover:underline">About</a>
        <a href="contact.html" class="hover:underline">Contact</a>
      </div>
      <div class="flex items-center space-x-3">
        <a href="menu.html" class="px-4 py-2 text-sm rounded transition-all duration-300 ease-in-out hover:scale-105 bg-gradient-to-r from-amber-400 to-orange-600">Checkout</a>
      </div>
    </div>
  </nav>

  <section class="w-full min-h-screen p-6" style="padding-top: 72px;">
    <h1 class="serif text-3xl mb-4">Your Cart</h1>
    <div id="cart-items" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
    <div class="mt-6 flex items-center justify-between">
      <div class="text-sm sans" id="cart-total"></div>
      <div class="flex items-center space-x-3">
        <a href="menu.html" class="px-4 py-2 rounded bg-white text-gray-800 border border-gray-300">Continue Shopping</a>
      </div>
    </div>
  </section>

  <section class="w-full px-6 pb-12">
    <div id="paypal-button-container" class="mx-auto w-full max-w-md"></div>
  </section>

  <footer class="w-full bg-gray-900 text-white py-6 text-center">
    <p>&copy; 2025 Niyantri Coffee. All rights reserved.</p>
  </footer>

  <script>
    function formatPrice(n){ return '$' + n.toFixed(2); }
    function renderCart(){
      const cart = JSON.parse(localStorage.getItem('niyantri_cart')||'[]');
      const container = document.getElementById('cart-items');
      const totalEl = document.getElementById('cart-total');
      container.innerHTML = '';
      let total = 0;
      if(cart.length===0){ container.innerHTML = '<div class="col-span-3 p-4">Your cart is empty.</div>'; totalEl.textContent = '';
        return;
      }
      cart.forEach(it => { const t = it.qty * it.price; total += t; container.innerHTML += `
        <div class="bg-white/80 rounded-lg p-4 shadow-md flex items-center justify-between"> 
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-gray-200 rounded-full" aria-label="item image"></div>
            <div>
              <div class="font-semibold unsans">${it.name}</div>
              <div class="text-sm text-gray-600">Qty: ${it.qty} Ã— ${formatPrice(it.price)}</div>
            </div>
          </div>
          <div class="text-gray-800 font-semibold">${formatPrice(t)}</div>
        </div>
      `; });
      totalEl.textContent = 'Total: ' + formatPrice(total);
    }
    // PayPal integration (sandbox client-id placeholder)
    function loadPayPal(){
      const script = document.createElement('script');
      script.src = 'https://www.paypal.com/sdk/js?client-id=YOUR_SANDBOX_CLIENT_ID&currency=USD';
      script.onload = setupPayPal;
      document.body.appendChild(script);
    }
    function setupPayPal(){
      const cart = JSON.parse(localStorage.getItem('niyantri_cart')||'[]');
      const total = cart.reduce((a,i)=>a + i.price*i.qty, 0);
      if(total <= 0){ document.getElementById('paypal-button-container').innerHTML = '';
        return;
      }
      paypal.Buttons({
        createOrder: function(data, actions) {
          return actions.order.create({
            purchase_units: [{ amount: { value: total.toFixed(2) } }]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(details){
            alert('Payment completed by ' + details.payer.name.given_name);
            localStorage.removeItem('niyantri_cart');
            renderCart();
          });
        }
      }).render('#paypal-button-container');
    }
    document.addEventListener('DOMContentLoaded', () => { renderCart(); loadPayPal(); });
  </script>
  <script>window.addEventListener('load', () => document.body.classList.remove('opacity-0'));</script>
</body>
</html>